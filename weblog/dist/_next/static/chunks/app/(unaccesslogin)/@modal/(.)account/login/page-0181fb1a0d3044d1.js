(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[124,149],{7159:function(e,a,t){Promise.resolve().then(t.bind(t,9789))},9789:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return d}});var o=t(7437),s=t(2265),n=t(9272),l=t.n(n),r=t(4033),i=t(2173);let c=i.Z.create({baseURL:"http://3.34.222.165:8080",headers:{"Content-Type":"application/json"}});function d(){let[e,a]=(0,s.useState)(""),[t,n]=(0,s.useState)(""),[i,d]=(0,s.useState)(),u=(0,r.useRouter)(),p={email:e,password:t},m=async e=>{e.preventDefault();try{let e=(await c.post("/api/v1/auth/login",p,{headers:{"Content-Type":"application/json"}})).data;console.log(e),e.accessToken&&e.refreshToken&&(localStorage.setItem("accestoken",e.accessToken),localStorage.setItem("refreshtoken",e.refreshToken),u.push("/dashboard/home"))}catch(e){console.log(e)}};return(0,o.jsx)("div",{className:l().modalBackground,children:(0,o.jsxs)("div",{className:l().modal,children:[(0,o.jsxs)("div",{className:l().modalHeader,children:[(0,o.jsx)("button",{className:l().closeBtn,onClick:()=>{u.back()}}),(0,o.jsx)("div",{children:"로그인하세요."})]}),(0,o.jsxs)("form",{onSubmit:m,children:[(0,o.jsxs)("div",{className:l().modalBody,children:[(0,o.jsxs)("div",{className:l().inputDiv,children:[(0,o.jsx)("label",{className:l().inputLabel,htmlFor:"email",children:"이메일"}),(0,o.jsx)("input",{id:"email",className:l().input,value:e,onChange:e=>{a(e.target.value)},type:"text",placeholder:""})]}),(0,o.jsxs)("div",{className:l().inputDiv,children:[(0,o.jsx)("label",{className:l().inputLabel,htmlFor:"password",children:"비밀번호"}),(0,o.jsx)("input",{id:"password",className:l().input,value:t,onChange:e=>{n(e.target.value)},type:"password",placeholder:""})]})]}),(0,o.jsx)("div",{className:l().message,children:i}),(0,o.jsx)("div",{className:l().modalFooter,children:(0,o.jsx)("button",{className:l().actionBtn,onClick:m,disabled:!e&&!t,children:"로그인하기"})})]})]})})}c.interceptors.request.use(e=>{let a=localStorage.getItem("accesstoken");return a&&(e.headers.Authorization="Bearer ".concat(a)),e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,async e=>{let a=e.config;if(401===e.response.status&&!a._retry){a._retry=!0;try{let e=(await c.post("/api/v1/auth/reissue",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("refreshtoken"))}})).data.accessToken;return localStorage.setItem("accessToken",e),a.headers.Authorization="Bearer ".concat(e),(0,i.Z)(a)}catch(e){console.log("Refresh token expired. Redirect to login page.")}}return Promise.reject(e)})},9272:function(e){e.exports={modalBackground:"login_modalBackground__FkQzT",modal:"login_modal__ZP824",modalHeader:"login_modalHeader__kdI_F",modalBody:"login_modalBody__X34gF",inputDiv:"login_inputDiv__TUS_P",inputLabel:"login_inputLabel__W4870",input:"login_input__RWdUH",modalFooter:"login_modalFooter__9mxpN",actionBtn:"login_actionBtn__O4g0O",closeBtn:"login_closeBtn__QhbG3"}}},function(e){e.O(0,[630,478,938,744],function(){return e(e.s=7159)}),_N_E=e.O()}]);